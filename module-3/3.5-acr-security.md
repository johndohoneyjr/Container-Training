# 3.5 ACR Security and Access Control

## Overview
This lab focuses on implementing enterprise-grade security for Azure Container Registry. You'll learn authentication methods, role-based access control, network security, and image scanning to protect your container registry and images.

## Learning Objectives
- Implement authentication with service principals
- Configure role-based access control (RBAC)
- Use managed identities for Azure resource access
- Implement network security (private endpoints, firewall rules)
- Configure image scanning with Microsoft Defender
- Use ACR Tasks for automated security scanning
- Apply security best practices

## Prerequisites
- Azure Container Registry created (Lab 3.2)
- Azure CLI configured with appropriate permissions
- Understanding of Azure AD and RBAC concepts
- Premium SKU ACR for advanced network features

---

## Lab 1: Service Principal Authentication

Service principals provide secure, automated access for applications and services.

### Step 1: Create Service Principal for Pull Access

```bash
# Set variables
ACR_NAME="progressacr12345678"
SP_NAME="acr-pull-sp"

# Get ACR resource ID
ACR_REGISTRY_ID=$(az acr show --name $ACR_NAME --query id --output tsv)

echo "ACR ID: $ACR_REGISTRY_ID"

# Create service principal with acrpull role
SP_PASSWD=$(az ad sp create-for-rbac \
  --name $SP_NAME \
  --scopes $ACR_REGISTRY_ID \
  --role acrpull \
  --query password \
  --output tsv)

# Get service principal App ID
SP_APP_ID=$(az ad sp list \
  --display-name $SP_NAME \
  --query [].appId \
  --output tsv)

# Display credentials (save securely!)
echo "Service Principal App ID: $SP_APP_ID"
echo "Service Principal Password: $SP_PASSWD"
```

**Expected Output:**
```
ACR ID: /subscriptions/.../resourceGroups/rg-containers/providers/Microsoft.ContainerRegistry/registries/progressacr12345678
Service Principal App ID: 12345678-1234-1234-1234-123456789012
Service Principal Password: abc123...xyz789
```

**⚠️ Security Note:** Store credentials securely in Azure Key Vault, not in code or environment variables.

### Step 2: Test Service Principal Authentication

```bash
# Login with service principal
docker login $ACR_NAME.azurecr.io \
  --username $SP_APP_ID \
  --password $SP_PASSWD

# Test pull access
docker pull $ACR_NAME.azurecr.io/mywebapi:1.0.0

# Verify (should work)
echo "✓ Pull successful"
```

### Step 3: Create Service Principal for Push Access

```bash
# Create service principal with acrpush role
SP_PUSH_NAME="acr-push-sp"

SP_PUSH_PASSWD=$(az ad sp create-for-rbac \
  --name $SP_PUSH_NAME \
  --scopes $ACR_REGISTRY_ID \
  --role acrpush \
  --query password \
  --output tsv)

SP_PUSH_APP_ID=$(az ad sp list \
  --display-name $SP_PUSH_NAME \
  --query [].appId \
  --output tsv)

# Display credentials
echo "Push Service Principal App ID: $SP_PUSH_APP_ID"
echo "Push Service Principal Password: $SP_PUSH_PASSWD"

# Test push access
docker login $ACR_NAME.azurecr.io \
  --username $SP_PUSH_APP_ID \
  --password $SP_PUSH_PASSWD

# Tag and push test image
docker tag mywebapi:latest $ACR_NAME.azurecr.io/mywebapi:sp-test
docker push $ACR_NAME.azurecr.io/mywebapi:sp-test

echo "✓ Push successful"
```

### Step 4: Store Credentials in Azure Key Vault

```bash
# Create Key Vault (if not exists)
KV_NAME="kv-acr-secrets-$(date +%s)"
az keyvault create \
  --name $KV_NAME \
  --resource-group rg-containers \
  --location eastus

# Store service principal credentials
az keyvault secret set \
  --vault-name $KV_NAME \
  --name "acr-pull-sp-id" \
  --value $SP_APP_ID

az keyvault secret set \
  --vault-name $KV_NAME \
  --name "acr-pull-sp-password" \
  --value $SP_PASSWD

# Retrieve credentials when needed
SP_APP_ID_RETRIEVED=$(az keyvault secret show \
  --vault-name $KV_NAME \
  --name "acr-pull-sp-id" \
  --query value \
  --output tsv)

echo "Retrieved App ID: $SP_APP_ID_RETRIEVED"
```

### Step 5: Manage Service Principal Lifecycle

```bash
# List service principals
az ad sp list --display-name "acr-*" --output table

# Rotate service principal password
NEW_SP_PASSWD=$(az ad sp credential reset \
  --id $SP_APP_ID \
  --query password \
  --output tsv)

echo "New password: $NEW_SP_PASSWD"

# Delete service principal (cleanup)
az ad sp delete --id $SP_APP_ID
```

---

## Lab 2: Role-Based Access Control (RBAC)

### Understanding ACR Roles

| Role | Permissions | Use Case |
|------|-------------|----------|
| **Owner** | Full access to registry | Administrators |
| **Contributor** | Full access except role assignment | DevOps engineers |
| **AcrPull** | Pull images only | Production workloads, CI/CD pull |
| **AcrPush** | Push and pull images | CI/CD pipelines |
| **AcrDelete** | Delete images | Image lifecycle management |
| **AcrImageSigner** | Sign images (Premium) | Security/compliance |
| **Reader** | View registry metadata | Auditors, monitoring |

### Step 1: Grant User Access to ACR

```bash
# Get user object ID
USER_EMAIL="user@example.com"
USER_OBJECT_ID=$(az ad user show \
  --id $USER_EMAIL \
  --query id \
  --output tsv)

# Grant AcrPull role to user
az role assignment create \
  --assignee $USER_OBJECT_ID \
  --scope $ACR_REGISTRY_ID \
  --role AcrPull

# Verify role assignment
az role assignment list \
  --scope $ACR_REGISTRY_ID \
  --assignee $USER_OBJECT_ID \
  --output table
```

**Expected Output:**
```
Principal                             Role     Scope
------------------------------------  -------  -------
user@example.com                      AcrPull  /subscriptions/.../registries/progressacr12345678
```

### Step 2: Grant Group Access

```bash
# Get Azure AD group ID
GROUP_NAME="DevOps-Team"
GROUP_OBJECT_ID=$(az ad group show \
  --group $GROUP_NAME \
  --query id \
  --output tsv)

# Grant AcrPush role to group
az role assignment create \
  --assignee $GROUP_OBJECT_ID \
  --scope $ACR_REGISTRY_ID \
  --role AcrPush

# Verify
az role assignment list \
  --scope $ACR_REGISTRY_ID \
  --output table
```

### Step 3: Repository-Scoped Permissions (Premium Only)

```bash
# Create repository-scoped token
TOKEN_NAME="mywebapi-token"

az acr token create \
  --name $TOKEN_NAME \
  --registry $ACR_NAME \
  --repository mywebapi content/read content/write

# Generate password for token
az acr token credential generate \
  --name $TOKEN_NAME \
  --registry $ACR_NAME \
  --expiration-in-days 30

# List tokens
az acr token list --registry $ACR_NAME --output table

# Use token for authentication
# Token username: mywebapi-token
# Token password: (generated above)
```

### Step 4: Scope Maps for Fine-Grained Control (Premium Only)

```bash
# Create scope map
az acr scope-map create \
  --name "developer-scope" \
  --registry $ACR_NAME \
  --repository mywebapi content/read content/write \
  --repository myworkerservice content/read \
  --description "Developer access to specific repos"

# Create token with scope map
az acr token create \
  --name "developer-token" \
  --registry $ACR_NAME \
  --scope-map developer-scope

# List scope maps
az acr scope-map list --registry $ACR_NAME --output table
```

### Step 5: Remove Access

```bash
# Remove role assignment
az role assignment delete \
  --assignee $USER_OBJECT_ID \
  --scope $ACR_REGISTRY_ID \
  --role AcrPull

# Delete token
az acr token delete \
  --name $TOKEN_NAME \
  --registry $ACR_NAME \
  --yes
```

---

## Lab 3: Managed Identity Integration

Managed identities eliminate the need for credentials in code when accessing ACR from Azure resources.

### Step 1: Create VM with System-Assigned Managed Identity

```bash
# Create virtual network (if needed)
az network vnet create \
  --resource-group rg-containers \
  --name vnet-acr \
  --address-prefix 10.0.0.0/16 \
  --subnet-name subnet-vms \
  --subnet-prefix 10.0.1.0/24

# Create VM with managed identity
az vm create \
  --resource-group rg-containers \
  --name vm-acr-test \
  --image Ubuntu2204 \
  --size Standard_B2s \
  --assign-identity \
  --vnet-name vnet-acr \
  --subnet subnet-vms \
  --admin-username azureuser \
  --generate-ssh-keys

# Get VM managed identity principal ID
VM_PRINCIPAL_ID=$(az vm identity show \
  --resource-group rg-containers \
  --name vm-acr-test \
  --query principalId \
  --output tsv)

echo "VM Principal ID: $VM_PRINCIPAL_ID"
```

### Step 2: Grant ACR Access to Managed Identity

```bash
# Grant AcrPull role to VM identity
az role assignment create \
  --assignee $VM_PRINCIPAL_ID \
  --scope $ACR_REGISTRY_ID \
  --role AcrPull

# Verify assignment
az role assignment list \
  --scope $ACR_REGISTRY_ID \
  --assignee $VM_PRINCIPAL_ID \
  --output table
```

### Step 3: Test Access from VM

```bash
# SSH to VM
VM_IP=$(az vm show \
  --resource-group rg-containers \
  --name vm-acr-test \
  --show-details \
  --query publicIps \
  --output tsv)

ssh azureuser@$VM_IP

# On VM: Install Docker and Azure CLI
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo usermod -aG docker $USER

# Install Azure CLI
curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash

# Login using managed identity
az login --identity

# Login to ACR
az acr login --name progressacr12345678

# Pull image (no credentials needed!)
docker pull progressacr12345678.azurecr.io/mywebapi:1.0.0

echo "✓ Successfully pulled using managed identity"

# Exit VM
exit
```

### Step 4: Use Managed Identity in Azure Container Instances

```bash
# Create user-assigned managed identity
IDENTITY_NAME="identity-aci-acr"

az identity create \
  --resource-group rg-containers \
  --name $IDENTITY_NAME

# Get identity details
IDENTITY_ID=$(az identity show \
  --resource-group rg-containers \
  --name $IDENTITY_NAME \
  --query id \
  --output tsv)

IDENTITY_PRINCIPAL_ID=$(az identity show \
  --resource-group rg-containers \
  --name $IDENTITY_NAME \
  --query principalId \
  --output tsv)

# Grant ACR access
az role assignment create \
  --assignee $IDENTITY_PRINCIPAL_ID \
  --scope $ACR_REGISTRY_ID \
  --role AcrPull

# Create ACI with managed identity
az container create \
  --resource-group rg-containers \
  --name aci-acr-test \
  --image $ACR_NAME.azurecr.io/mywebapi:1.0.0 \
  --assign-identity $IDENTITY_ID \
  --acr-identity $IDENTITY_ID \
  --ports 8080 \
  --dns-name-label myapi-$(date +%s)

# Verify container running
az container show \
  --resource-group rg-containers \
  --name aci-acr-test \
  --query "{Status:instanceView.state, FQDN:ipAddress.fqdn}" \
  --output table
```

---

## Lab 4: Network Security

### Step 1: Disable Public Network Access (Premium Only)

```bash
# First, ensure you're using Premium SKU
az acr update --name $ACR_NAME --sku Premium

# Disable public network access
az acr update \
  --name $ACR_NAME \
  --public-network-enabled false

echo "⚠️ ACR is now only accessible via private endpoints"

# To re-enable (for testing)
az acr update \
  --name $ACR_NAME \
  --public-network-enabled true
```

**⚠️ Warning:** After disabling public access, you must configure private endpoints to access the registry.

### Step 2: Create Private Endpoint

```bash
# Create subnet for private endpoints (disable private endpoint network policies)
az network vnet subnet create \
  --resource-group rg-containers \
  --vnet-name vnet-acr \
  --name subnet-privateendpoints \
  --address-prefix 10.0.2.0/24

az network vnet subnet update \
  --resource-group rg-containers \
  --vnet-name vnet-acr \
  --name subnet-privateendpoints \
  --disable-private-endpoint-network-policies true

# Create private endpoint
az network private-endpoint create \
  --resource-group rg-containers \
  --name pe-acr \
  --vnet-name vnet-acr \
  --subnet subnet-privateendpoints \
  --private-connection-resource-id $ACR_REGISTRY_ID \
  --group-id registry \
  --connection-name acr-connection

# Verify private endpoint
az network private-endpoint show \
  --resource-group rg-containers \
  --name pe-acr \
  --query "{Name:name, ProvisioningState:provisioningState}" \
  --output table
```

### Step 3: Configure Private DNS Zone

```bash
# Create private DNS zone
az network private-dns zone create \
  --resource-group rg-containers \
  --name "privatelink.azurecr.io"

# Link DNS zone to VNet
az network private-dns link vnet create \
  --resource-group rg-containers \
  --zone-name "privatelink.azurecr.io" \
  --name acr-dns-link \
  --virtual-network vnet-acr \
  --registration-enabled false

# Create DNS zone group (automatic DNS record creation)
az network private-endpoint dns-zone-group create \
  --resource-group rg-containers \
  --endpoint-name pe-acr \
  --name acr-dns-zone-group \
  --private-dns-zone "privatelink.azurecr.io" \
  --zone-name acr

# Verify DNS records
az network private-dns record-set a list \
  --resource-group rg-containers \
  --zone-name "privatelink.azurecr.io" \
  --output table
```

### Step 4: Configure Firewall Rules

```bash
# Enable public network access with firewall
az acr update \
  --name $ACR_NAME \
  --public-network-enabled true

# Add IP address rule (your public IP)
MY_IP=$(curl -s https://ifconfig.me)
echo "Your IP: $MY_IP"

az acr network-rule add \
  --name $ACR_NAME \
  --ip-address $MY_IP

# Add IP range (office network)
az acr network-rule add \
  --name $ACR_NAME \
  --ip-address 203.0.113.0/24

# Add virtual network rule
az acr network-rule add \
  --name $ACR_NAME \
  --vnet-name vnet-acr \
  --subnet subnet-vms

# List network rules
az acr network-rule list \
  --name $ACR_NAME \
  --output table
```

### Step 5: Remove Network Rules

```bash
# Remove specific IP rule
az acr network-rule remove \
  --name $ACR_NAME \
  --ip-address $MY_IP

# Remove VNet rule
az acr network-rule remove \
  --name $ACR_NAME \
  --vnet-name vnet-acr \
  --subnet subnet-vms

# Verify removal
az acr network-rule list --name $ACR_NAME
```

---

## Lab 5: Image Scanning with Microsoft Defender

### Step 1: Enable Microsoft Defender for Containers

```bash
# Enable Defender for Containers at subscription level
az security pricing create \
  --name Containers \
  --tier Standard

# Verify Defender status
az security pricing show \
  --name Containers \
  --query "{Name:name, Tier:pricingTier}" \
  --output table
```

**Expected Output:**
```
Name        Tier
----------  --------
Containers  Standard
```

### Step 2: Push Image for Scanning

```bash
# Tag and push image
docker tag mywebapi:latest $ACR_NAME.azurecr.io/mywebapi:scan-test
docker push $ACR_NAME.azurecr.io/mywebapi:scan-test

# Wait for automatic scan (can take 5-10 minutes)
echo "Waiting for Microsoft Defender to scan image..."
sleep 60
```

### Step 3: View Scan Results in Azure Portal

1. Navigate to [Azure Portal](https://portal.azure.com)
2. Go to **Microsoft Defender for Cloud**
3. Select **Recommendations**
4. Filter by **Container registries**
5. View vulnerabilities found in images

### Step 4: Query Scan Results with Azure CLI

```bash
# List security assessments
az security assessment list \
  --query "[?contains(id, 'containerRegistry')].{Name:displayName, Status:status.code, Severity:metadata.severity}" \
  --output table

# Get detailed vulnerability information (requires Azure Resource Graph)
az graph query -q "
securityresources
| where type == 'microsoft.security/assessments'
| where properties.resourceDetails.Id contains '$ACR_NAME'
| project 
    Image = properties.resourceDetails.Id,
    Severity = properties.metadata.severity,
    Status = properties.status.code,
    Description = properties.displayName
" --output table
```

### Step 5: Remediate Vulnerabilities

```bash
# Example: Update base image to fix vulnerabilities

# Current Dockerfile with vulnerable base
cat > Dockerfile.old <<EOF
FROM mcr.microsoft.com/dotnet/aspnet:6.0
WORKDIR /app
COPY . .
ENTRYPOINT ["dotnet", "MyWebApi.dll"]
EOF

# Updated Dockerfile with patched base
cat > Dockerfile <<EOF
FROM mcr.microsoft.com/dotnet/aspnet:8.0
WORKDIR /app
COPY . .
ENTRYPOINT ["dotnet", "MyWebApi.dll"]
EOF

# Rebuild and push
docker build -t mywebapi:fixed .
docker tag mywebapi:fixed $ACR_NAME.azurecr.io/mywebapi:1.0.1
docker push $ACR_NAME.azurecr.io/mywebapi:1.0.1

# Wait for rescan
echo "Image pushed. Defender will rescan automatically."
```

---

## Lab 6: ACR Tasks for Security Scanning

### Step 1: Create ACR Task for Trivy Scanning

```bash
# Create ACR task that scans images with Trivy
az acr task create \
  --registry $ACR_NAME \
  --name security-scan-trivy \
  --image '{{.Run.Registry}}/{{.Run.Repository}}:{{.Run.ID}}' \
  --context /dev/null \
  --cmd "mcr.microsoft.com/aquasec/trivy:latest image --severity HIGH,CRITICAL {{.Run.Registry}}/{{.Run.Repository}}:{{.Run.ID}}" \
  --commit-trigger-enabled false

# Manually trigger scan
az acr task run \
  --registry $ACR_NAME \
  --name security-scan-trivy \
  --set Run.Repository=mywebapi \
  --set Run.ID=1.0.0
```

### Step 2: Create Multi-Step Security Task

Create `acr-task.yaml`:

```yaml
version: v1.1.0
steps:
  # Step 1: Build image
  - build: -t {{.Run.Registry}}/{{.Values.repository}}:{{.Run.ID}} -f Dockerfile .
    when: ["-"]
  
  # Step 2: Scan with Trivy
  - cmd: mcr.microsoft.com/aquasec/trivy:latest image --exit-code 1 --severity CRITICAL {{.Run.Registry}}/{{.Values.repository}}:{{.Run.ID}}
    when: ["-"]
  
  # Step 3: Push if scan passes
  - push: 
      - {{.Run.Registry}}/{{.Values.repository}}:{{.Run.ID}}
      - {{.Run.Registry}}/{{.Values.repository}}:latest
    when: ["-"]
  
  # Step 4: Generate SBOM
  - cmd: mcr.microsoft.com/aquasec/trivy:latest image --format cyclonedx {{.Run.Registry}}/{{.Values.repository}}:{{.Run.ID}} > sbom.json
    when: ["-"]
```

Create task:

```bash
# Create task from YAML
az acr task create \
  --registry $ACR_NAME \
  --name secure-build-pipeline \
  --context https://github.com/youruser/yourrepo.git \
  --file acr-task.yaml \
  --git-access-token <github-token> \
  --set repository=mywebapi

# Run task
az acr task run \
  --registry $ACR_NAME \
  --name secure-build-pipeline
```

### Step 3: Scheduled Security Scans

```bash
# Create task that runs nightly security scans
az acr task create \
  --registry $ACR_NAME \
  --name nightly-security-scan \
  --cmd "mcr.microsoft.com/aquasec/trivy:latest image --severity HIGH,CRITICAL {{.Run.Registry}}/mywebapi:latest" \
  --context /dev/null \
  --schedule "0 2 * * *" \
  --trigger-enabled true

# List scheduled tasks
az acr task list \
  --registry $ACR_NAME \
  --query "[?trigger.timerTriggers!=null].{Name:name, Schedule:trigger.timerTriggers[0].schedule, Status:status}" \
  --output table
```

### Step 4: View Task Run History

```bash
# List all task runs
az acr task list-runs \
  --registry $ACR_NAME \
  --output table

# Get logs from specific run
RUN_ID="ca1"
az acr task logs \
  --registry $ACR_NAME \
  --run-id $RUN_ID

# Filter runs by task
az acr task list-runs \
  --registry $ACR_NAME \
  --task security-scan-trivy \
  --output table
```

---

## Security Best Practices Summary

### Authentication & Authorization
- ✅ Use service principals or managed identities (never admin credentials in production)
- ✅ Apply principle of least privilege (use AcrPull for read-only access)
- ✅ Implement repository-scoped tokens for fine-grained access (Premium)
- ✅ Store credentials in Azure Key Vault
- ✅ Rotate service principal credentials regularly
- ✅ Use Azure AD groups for team-based access

### Network Security
- ✅ Use private endpoints for production registries (Premium)
- ✅ Disable public network access when possible
- ✅ Implement firewall rules to restrict IP access
- ✅ Use VNet integration for Azure services
- ✅ Enable diagnostic logging for audit trails

### Image Security
- ✅ Enable Microsoft Defender for Containers
- ✅ Scan all images before deployment
- ✅ Sign images with content trust (Premium)
- ✅ Attach SBOMs to all images
- ✅ Use minimal base images
- ✅ Keep base images updated
- ✅ Implement automated vulnerability scanning

### Operations
- ✅ Enable audit logging and monitoring
- ✅ Set up alerts for security events
- ✅ Implement image retention policies
- ✅ Regular security reviews and compliance checks
- ✅ Document security procedures
- ✅ Incident response planning

---

## Verification Script

```bash
#!/bin/bash

ACR_NAME="progressacr12345678"
ACR_REGISTRY_ID=$(az acr show --name $ACR_NAME --query id --output tsv)

echo "=== ACR Security Verification ==="
echo ""

# 1. Check admin user status
echo "1. Admin User Status:"
ADMIN_ENABLED=$(az acr show --name $ACR_NAME --query "adminUserEnabled" --output tsv)
if [ "$ADMIN_ENABLED" == "false" ]; then
    echo "   ✓ Admin user is disabled (recommended)"
else
    echo "   ⚠ Admin user is enabled (not recommended for production)"
fi
echo ""

# 2. Check role assignments
echo "2. Role Assignments:"
az role assignment list --scope $ACR_REGISTRY_ID --output table
echo ""

# 3. Check network rules
echo "3. Network Rules:"
PUBLIC_ENABLED=$(az acr show --name $ACR_NAME --query "publicNetworkAccess" --output tsv)
echo "   Public Network Access: $PUBLIC_ENABLED"
az acr network-rule list --name $ACR_NAME --output table
echo ""

# 4. Check Microsoft Defender
echo "4. Microsoft Defender for Containers:"
az security pricing show --name Containers --query "pricingTier" --output tsv
echo ""

# 5. Check content trust (Premium only)
echo "5. Content Trust:"
az acr config content-trust show --name $ACR_NAME --query "status" --output tsv 2>/dev/null || echo "   N/A (requires Premium SKU)"
echo ""

echo "=== Verification Complete ==="
```

---

## Troubleshooting

### Issue: "403 Forbidden" when accessing ACR

**Solution:**
```bash
# Check role assignments
az role assignment list --scope $ACR_REGISTRY_ID --assignee $(az ad signed-in-user show --query objectId -o tsv)

# Grant appropriate role
az role assignment create \
  --assignee $(az ad signed-in-user show --query objectId -o tsv) \
  --scope $ACR_REGISTRY_ID \
  --role AcrPull
```

### Issue: Cannot access ACR after enabling private endpoint

**Solution:**
```bash
# Verify private endpoint status
az network private-endpoint show \
  --resource-group rg-containers \
  --name pe-acr

# Check DNS configuration
nslookup $ACR_NAME.azurecr.io

# Should resolve to private IP (10.0.x.x), not public IP
```

### Issue: Service principal authentication fails

**Solution:**
```bash
# Verify service principal exists
az ad sp show --id $SP_APP_ID

# Check role assignment
az role assignment list --assignee $SP_APP_ID --scope $ACR_REGISTRY_ID

# Reset credentials
az ad sp credential reset --id $SP_APP_ID
```

---

## Additional Resources

- [ACR Authentication Overview](https://docs.microsoft.com/azure/container-registry/container-registry-authentication)
- [ACR Roles and Permissions](https://docs.microsoft.com/azure/container-registry/container-registry-roles)
- [ACR Private Link](https://docs.microsoft.com/azure/container-registry/container-registry-private-link)
- [Microsoft Defender for Containers](https://docs.microsoft.com/azure/defender-for-cloud/defender-for-containers-introduction)
- [ACR Best Practices](https://docs.microsoft.com/azure/container-registry/container-registry-best-practices)
- [Azure Security Baseline for ACR](https://docs.microsoft.com/security/benchmark/azure/baselines/container-registry-security-baseline)

---

**Progress Software** | Module 3: Azure Container Registry | Lab 3.5
